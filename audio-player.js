window.addEventListener('DOMContentLoaded', () => {
    // Crear el HTML din√°micamente
    const audioPlayerHTML = `
        <audio id="backgroundAudio" loop>
            <source src="musica.mp3" type="audio/mpeg">
            Tu navegador no soporta el elemento de audio.
        </audio>

        <div class="player-container">
            <button class="play-button" onclick="togglePlay()">‚ñ∂Ô∏è</button>
            <span id="volumeIcon" class="volume-icon">üîâ</span>
            <input type="range" id="volumeSlider" min="0" max="100" value="50" oninput="updateVolume()">
        </div>
    `;

    // Insertar el reproductor en el body
    document.body.insertAdjacentHTML('beforeend', audioPlayerHTML);

    // Llamar a la funci√≥n para configurar la m√∫sica
    setupAudioPlayer();
});

function setupAudioPlayer() {
    const audio = document.getElementById("backgroundAudio");
    const volumeSlider = document.getElementById("volumeSlider");
    const volumeIcon = document.getElementById("volumeIcon");
    const playButton = document.querySelector(".play-button");

    function togglePlay() {
        if (audio.paused) {
            audio.play();
            playButton.textContent = "‚è∏";
        } else {
            audio.pause();
            playButton.textContent = "‚ñ∂Ô∏è";
        }
    }

    function updateVolume() {
        const volume = volumeSlider.value / 100;
        audio.volume = volume;

        if (volume == 0) {
            volumeIcon.textContent = "üîá";
        } else if (volume < 0.3) {
            volumeIcon.textContent = "üîà";
        } else if (volume < 0.7) {
            volumeIcon.textContent = "üîâ";
        } else {
            volumeIcon.textContent = "üîä";
        }
    }

    // Agregar las funciones al bot√≥n de reproducci√≥n y slider
    window.togglePlay = togglePlay;
    window.updateVolume = updateVolume;
}
